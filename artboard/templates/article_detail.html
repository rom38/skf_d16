<!--  наследуемся от шаблона default.html, который мы создавали для flatpages -->
{% extends 'default.html' %}
{% load static %}
{% load martortags %}

{% block title %}
Статья
{% endblock title %}

{% block css %}
  <link href="{% static 'plugins/css/ace.min.css' %}" type="text/css" media="all" rel="stylesheet" />
  <link href="{% static 'martor/css/martor.bootstrap.min.css' %}" type="text/css" media="all" rel="stylesheet" />
{% endblock %}

{% block content %}
<h1>Статья</h1>
<dl class="row">
    <dt class="col-sm-3">Автор:</dt>
    <dd class="col-sm-9">{{ article.author.username }}</dd>
    <dt class="col-sm-3">Дата создания:</dt>
    <dd class="col-sm-9">{{ article.time_create | date:'d M Y' }}</dd>
    <dt class="col-sm-3">Заголовок:</dt>
    <dd class="col-sm-9">{{ article.title }}</dd>
    <dt class="col-sm-3">Категория:</dt>
    <dd class="col-sm-9">{{ article.get_category_display }}</dd>
    <dt class="col-sm-3">Содержание:</dt>
    <dd class="col-sm-9">{{ article.text | safe_markdown }}</dd>
</dl>
  {% if perms.articles.delete_article and author_user %}
    <a href="{% url 'article_delete' article.id %}" class="btn btn-danger">Удалить</a>
  {% endif %}
  {% if perms.articles.change_article and author_user %}
    <a href="{% url 'article_update' article.id %}" class="btn btn-primary">Изменить</a>
  {% endif %}
  {% if not author_user %}

    <a href="{% url 'response_create' article.id %}" class="btn
      btn-primary">Написать отклик</a>
  {% endif%}
{% endblock content %}

{% block js %}
  <script type="text/javascript" src="{% static 'plugins/js/highlight.min.js' %}"></script>
  <script>
    $('.martor-preview pre').each(function(i, block){
        hljs.highlightBlock(block);
    });
  </script>
{% endblock %}
